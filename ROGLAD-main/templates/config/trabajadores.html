{% extends 'base.html' %}
{% load static custom_filters %}

{% block styles %}
{% endblock styles %}
                
{% block content %}
<div class="flex w-full h-full justify-center">
    <div class="flex flex-col items-center w-screen h-full bg-white w-full">
        <div class="border-b border-gray-200 w-full overflow-x-auto h-18 scrollbar scrollbar-xs" id="content-menu">
            {% include "config/menu_select.html" %}
        </div>

        <div class="w-full h-[calc(100%-4rem)] overflow-auto" id="content-table">
            <div class="rounded-lg w-full flex items-center justify-center">
                <div class="w-full h-full">
                    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                        <thead class="bg-white">
                            <tr class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0">
                                <th scope="col" class="px-6 py-3"> Usuario </th>
                                <th scope="col" class="px-6 py-3"> Función </th>
                                <th scope="col" class="px-6 py-3"> CI </th>
                                <th scope="col" class="px-6 py-3"> Teléfono </th>
                                <th scope="col" class="px-6 py-1.5 flex justify-center items-center">
                                    <button class="flex items-center justify-between px-3 py-1.5 text-sm font-medium leading-5 text-gray-600 hover:text-gray-800 shadow-sm hover:shadow-sm bg-gray-200 hover:bg-gray-300 border border-transparent rounded-lg focus:outline-none focus:shadow-outline-gray"
                                        data-modal-target="popup-modal" data-modal-toggle="popup-modal" id="btn-add-trabajador" onclick="limpiarForm()">
                                        <svg class="w-5 h-5 mr-2" aria-hidden="true" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"></path>
                                        </svg>
                                        Agregar trabajador
                                    </button>
                            </th>
                            </tr>
                        </thead>
                        <tbody id="body-usuarios" class="">
                            {% for usuario in usuarios %}
                            <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600" id="tr-content-{{usuario.id}}">
                                <th scope="row" class="flex items-center px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white">
                                    <img class="w-8 h-8 rounded-full mr-6" src="{{usuario.img}}">
                                    {{ usuario.user }} 
                                </th>
                                <td class="px-6 py-4 text-base font-semibold">{{ usuario.rool }}</td>
                                <td class="px-6 py-4 text-base font-semibold">{{ usuario.ci|nullToBlank }}</td>
                                <td class="px-6 py-4 text-base font-semibold">{{ usuario.telefono|nullToBlank }}</td>
                                <td class="px-6 py-4 flex justify-center">
                                    <button class="flex items-center justify-between px-2 py-2 text-sm font-medium leading-5 text-purple-600 rounded-lg dark:text-gray-400 focus:outline-none focus:shadow-outline-gray mr-6" aria-label="Edit"
                                    data-modal-target="popup-modal" data-modal-toggle="popup-modal"  onclick="editUsuario({{usuario.id}},'{{usuario.user}}','{{usuario.ci}}','{{usuario.telefono}}','{{usuario.rool}}','{{usuario.img}}')">
                                        <svg class="w-5 h-5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path>
                                        </svg>
                                    </button>
                                    {% if usuario.is_delete and usuario != request.user %}
                                    <button class="flex items-center justify-between px-2 py-2 text-sm font-medium leading-5 text-purple-600 rounded-lg dark:text-gray-400 focus:outline-none focus:shadow-outline-gray"
                                    data-modal-target="delete-modal" data-modal-toggle="delete-modal"  aria-label="Delete"  
                                    onclick="document.getElementById('id-delete').value='{{usuario.id}}',
                                    document.getElementById('form-delete').setAttribute('action','/config-user/')">
                                        <svg class="w-5 h-5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                        </svg>
                                    </button>
                                    {% else %}
                                    <button class="flex items-center justify-between px-2 py-2 text-sm font-medium leading-5 cursor-not-allowed text-gray-400 rounded-lg dark:text-gray-400 focus:outline-none focus:shadow-outline-gray">
                                        <svg class="w-5 h-5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                        </svg>
                                    </button>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>    
</div>

<div id="popup-modal" tabindex="-1" data-modal-backdrop="static"  class="fixed top-0 left-0 right-0 z-50 hidden p-4 overflow-hidden md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="w-auto max-w-5xl max-h-full overflow-auto">
        <div class="bg-white rounded-lg shadow dark:bg-gray-700 max-h-full mb-0">
            
            <div class="px-6 py-6" id="content-modal">
                <ul class="grid w-full gap-2 md:grid-cols-2 pt-6 hidden">
                    <li>
                        <label id="lbl-permanente" class="text-center text-sm font-semibold inline-flex items-center justify-center w-full py-2 bg-white rounded-full cursor-pointer border border-blue-600 text-blue-600 hover:bg-gray-100"
                        onclick="changeAddUser('lbl-permanente','form-add-trabajador')">                           
                            Trabajador permanente
                        </label>
                    </li>
                    <li>
                        <label id="lbl-servicio" class="text-center text-sm font-semibold inline-flex items-center justify-center w-full py-2 text-gray-500 bg-white border border-gray-200 rounded-full cursor-pointer hover:bg-gray-100"
                        onclick="changeAddUser('lbl-servicio','form-add-servicio')">                           
                            Trabajador de servicio
                        </label>
                    </li>
                </ul>

                <form id="form-add-trabajador" class=""  method="POST" enctype="multipart/form-data" action="/config-user/">
                    {% csrf_token %}
                    <input class="hidden" type="text" id="edit_id" name="edit_id">  
                    <div class="">
                        <div class="flex space-x-2">
                            <p class="text-gray-700 dark:text-gray-400 m-1.5 w-1/2 font-semibold">Usuario</p>
                            <p class="text-gray-700 dark:text-gray-400 m-1.5 w-1/2 font-semibold">Contraseña</p>
                        </div>
                        
                        <div class="flex space-x-2">
                            <input class="bg-gray-50 w-1/2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" placeholder="Nombre de usuario" type="text" id="new-user" name="user" required="">            
                            <input class="bg-gray-50 w-1/2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" placeholder="***************" type="text" id="new-password" name="password" required="">
                        </div>

                        <div class="flex space-x-2">
                            <p class="text-gray-700 dark:text-gray-400 m-1.5 w-1/2 font-semibold">Carné de identidad</p>
                            <p class="text-gray-700 dark:text-gray-400 m-1.5 w-1/2 font-semibold">Teléfono</p>
                        </div>
                        
                        <div class="flex space-x-2">
                            <input class="bg-gray-50 w-1/2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" placeholder="Carné de identidad" type="text" id="ci" name="ci" required="">            
                            <input class="bg-gray-50 w-1/2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" placeholderTeléfono type="text" id="telefono" name="telefono">
                        </div>

                        
                        <div class="w-full" id="rool-div">
                        
                            <p class="text-gray-700 dark:text-gray-400 m-1.5 font-semibold mt-6">Funciones a realizar</p>

                            <div class="flex flex-wrap max-w-md">
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-superusuario" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="superusuario" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-superusuario" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">Superusuario</label>
                                </div>
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-balancista" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="balancista" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-balancista" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">Balancista</label>
                                </div>
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-almacenero" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="almacenero" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-almacenero" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">Almacenero</label>
                                </div>
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-admin" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="admin" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-admin" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">Administrador</label>
                                </div>
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-salon" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="salon" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-salon" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">Trabajador de Salón</label>
                                </div>
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-estudio" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="estudio" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-estudio" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">Gestor de Estudio</label>
                                </div>
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-responsable-estudio" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="responsable-estudio" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-responsable-estudio" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">Responsable de contratos del Estudio</label>
                                </div>
                                {% for servicio in servicios %}
                                <div class="flex items-center mb-2 ml-3">
                                    <input id="funcion-servicio-{{servicio.id}}" onclick="checkRoolOk(['funcion-pv','funcion-cocina'])" funcion-type="funcion-super" name="roles" type="radio" value="servicio-{{servicio.id}}" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <label for="funcion-servicio-{{servicio.id}}" class="font-bold ml-2 text-sm text-gray-700 dark:text-gray-300">{{servicio.nombre}}</label>
                                </div>
                                {% endfor %}
                            </div>
                            
                            <div class="w-2/3 h-0.5 bg-gray-100 mb-4 mt-2"></div>
                            
                            {% for pv in puntos_venta %}
                            <div class="flex items-center mb-2">
                                <input id="funcion-trab-pv-{{pv.id}}" onclick="checkRoolOk(['funcion-super','funcion-cocina'])" funcion-type="funcion-pv" name="roles" type="checkbox" value="PV-{{pv.id}}" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                <label for="funcion-trab-pv-{{pv.id}}" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Trabajador de punto de venta <span class="font-bold">{{pv.nombre}}<span></label>
                            </div>
                            {% endfor %}
                            
                            <div class="w-2/3 h-0.5 bg-gray-100 mb-4 mt-4"></div>

                            {% for c in cocinas %}
                            <div class="flex items-center mb-2">
                                <input id="funcion-trab-cocina-{{c.id}}" onclick="checkRoolOk(['funcion-super','funcion-pv'])" funcion-type="funcion-cocina" name="roles" type="checkbox" value="C-{{c.id}}" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                <label for="funcion-trab-cocina-{{c.id}}" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Trabajador cocina <span class="font-bold">{{c.nombre}}<span></label>
                            </div>
                            {% endfor %}

                            <p class="text-gray-700 dark:text-gray-400  mx-1.5 font-semibold mt-6">Sistema de pago</p>
                            <div class="flex items-center px-2 py-1">
                                <input id="pago-909" name="pago_909" type="checkbox" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-0">
                                <label for="pago-909" class="ms-2 text-sm text-gray-900 dark:text-gray-300">Pagar 9.09</label>
                            </div>

                        </div>

                    </div>
                
                    <div class="flex items-center py-6">
                        <p class="text-gray-700 dark:text-gray-400 m-1.5 font-semibold mr-6">Seleccionar imagen del usuario: </p>
                        <ul class="flex justify-start space-x-3">
                            <li>
                                <input type="radio" id="men-user" name="avatar" value="men-user" class="hidden peer" onchange="selectAvatar()" checked="true">
                                <label for="men-user" id="label-men-user" class="inline-flex w-full p-0.5 bg-white border-2 border-gray-200 rounded-full cursor-pointer dark:border-gray-700 dark:peer-checked:text-purple-500 peer-checked:border-purple-600 peer-checked:text-purple-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">
                                    <img class="w-12 h-12 rounded-full" src="/static/images/men.jpg" alt="">
                                </label>
                            </li>
                            <li>
                                <input type="radio" id="women-user" name="avatar" value="women-user" class="hidden peer" onchange="selectAvatar()">
                                <label for="women-user" id="label-women-user" class="inline-flex w-full p-0.5 bg-white border-2 border-gray-200 rounded-full cursor-pointer dark:border-gray-700 dark:peer-checked:text-purple-500 peer-checked:border-purple-600 peer-checked:text-purple-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">  
                                    <img class="w-12 h-12 rounded-full" src="/static/images/women.jpg" alt="">                         
                                </label>
                            </li>
                            <li>
                                <input type="file" accept="image/*" id="image-user" name="image-user" class="hidden peer" onchange="previewImage(event,'user')">
                                <label for="image-user" id="content-image-user" class="inline-flex w-25 h-25 p-0.5 rounded-full bg-white border-2 border-gray-200 cursor-pointer">
                                    <img class="w-12 h-12 bg-purple-600 rounded-full" src="/static/images/add-image2.jpg" alt="" id="preview-image-user">
                                </label>
                            </li>
                        </ul>
                    </div>
                
                    <p class="flex justify-center font-bold text-md mt-2 text-red-700 dark:text-red-100 hidden" id="error-add"></p>
                    <div class="flex mt-2 px-2" id="content-options">
                        <button type="button" class="w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600" id="btn-cancel" data-modal-hide="popup-modal">Cancelar</button>
                        <button type="submit" class="w-full text-white bg-purple-600 hover:bg-purple-800 focus:ring-4 focus:outline-none focus:ring-purple-300 dark:focus:ring-purple-800 font-medium rounded-lg text-sm items-center px-5 py-2.5 text-center ml-2 " id="btn-accept">Agregar</button>
                    </div>
                </form>

                <!--<form id="form-add-servicio" class="hidden"  method="POST" enctype="multipart/form-data" action="/config-trabajador-servicio/">
                    {% csrf_token %}
                    <p class="text-gray-700 dark:text-gray-400 m-1.5 w-1/2 font-semibold">Usuario</p>
                    <input class="bg-gray-50 w-1/2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" placeholder="Nombre del trabajador" type="text" id="new-user" name="user" required="">  
               
                    <p class="text-gray-700 dark:text-gray-400 mt-1.5 mx-1.5 font-semibold">Sistema de pago</p>
                    <div class="flex items-center px-2 py-1">
                        <input id="pago-909-2" name="pago_909" type="checkbox" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-0">
                        <label for="pago-909-2" class="ms-2 text-sm text-gray-900 dark:text-gray-300">Pagar 9.09</label>
                    </div>                    
                    <div id="content-pagos-servicios">
                        <p class="text-gray-700 dark:text-gray-400 mx-1.5 text-sm">Servicios</p>
                        <div class="flex flex-wrap px-2 py-1">
                            {% for servicio in servicios %}
                            <input id="servicio-{{servicio.id}}-2" type="checkbox" name="pago_servicios" value="{{servicio.id}}" class="w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-0">
                            <label for="servicio-{{servicio.id}}-2" class="ms-2 text-sm text-gray-900 dark:text-gray-300 mr-3">{{servicio.nombre}}</label>
                            {% endfor %}
                        </div>
                    </div>
                
                    <p class="text-gray-700 dark:text-gray-400 m-1.5 font-semibold">Seleccionar imagen</p>
                    <ul class="w-full flex justify-between space-x-3 mb-6">
                        <li>
                            <input type="radio" id="men-user-2" name="avatar" value="men-user" class="hidden peer" onchange="selectAvatar()" checked="true">
                            <label for="men-user-2" id="label-men-user-2" class="inline-flex w-full p-0.5 bg-white border-2 border-gray-200 rounded-full cursor-pointer dark:border-gray-700 dark:peer-checked:text-purple-500 peer-checked:border-purple-600 peer-checked:text-purple-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">
                                <img class="w-24 h-24 rounded-full" src="/static/images/men.jpg" alt="">
                            </label>
                        </li>
                        <li>
                            <input type="radio" id="women-user-2" name="avatar" value="women-user" class="hidden peer" onchange="selectAvatar()">
                            <label for="women-user-2" id="label-women-user-2" class="inline-flex w-full p-0.5 bg-white border-2 border-gray-200 rounded-full cursor-pointer dark:border-gray-700 dark:peer-checked:text-purple-500 peer-checked:border-purple-600 peer-checked:text-purple-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">  
                                <img class="w-24 h-24 rounded-full" src="/static/images/women.jpg" alt="">                         
                            </label>
                        </li>
                        <li>
                            <input type="file" accept="image/*" id="image-user-2" name="image-user" class="hidden peer" onchange="previewImage(event,'user-2')">
                            <label for="image-user-2" id="content-image-user-2" class="inline-flex w-25 h-25 p-0.5 rounded-full bg-white border-2 border-gray-200 cursor-pointer">
                                <img class="w-24 h-24 bg-purple-600 rounded-full" src="/static/images/add-image2.jpg" alt="" id="preview-image-user-2">
                            </label>
                        </li>
                    </ul>
                
                    <p class="flex justify-center font-bold text-md mt-2 text-red-700 dark:text-red-100 hidden" id="error-add"></p>
                    <div class="flex mt-2 px-2" id="content-options">
                        <button type="button" class="w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600" id="btn-cancel" data-modal-hide="popup-modal">Cancelar</button>
                        <button type="submit" class="w-full text-white bg-purple-600 hover:bg-purple-800 focus:ring-4 focus:outline-none focus:ring-purple-300 dark:focus:ring-purple-800 font-medium rounded-lg text-sm items-center px-5 py-2.5 text-center ml-2 " id="btn-accept">Agregar</button>
                    </div>
                </form>-->
            </div>
        </div>
    </div>
</div>


<div id="delete-modal" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative p-4 w-full max-w-md max-h-full">
        <form class="relative bg-white rounded-lg shadow dark:bg-gray-700" method="POST" id="form-delete" action="/config-user/">
            <button type="button" class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="delete-modal">
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
                <span class="sr-only">Close modal</span>
            </button>
            {% csrf_token %}
            <input class="hidden" type="text" id="id-delete" name="delete-id">
            <div class="p-4 md:p-5 text-center">
                <svg class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                </svg>
                <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">¿Estas seguro de eliminar el trabajador?</h3>
                
                <p class="flex justify-center font-bold text-md mt-2 text-red-700 dark:text-red-100 hidden" id="error-delete"></p>
                <div class="flex mt-2 px-2 justify-center space-x-3" id="content-options-delete">
                    <button data-modal-hide="delete-modal" id="btn-cancel-delete" type="button" class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">No, cancelar</button>
                    <button type="submit" class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center me-2">Si, eliminar</button>
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock content %}


{% block scripts %}
<script type = "text/JavaScript">

    const contentMenu = document.getElementById('content-menu');
    contentMenu.scrollLeft = parseInt(localStorage.getItem("scroll-menu-config"));
    contentMenu.onscroll = (e)=>{ 
        localStorage.setItem("scroll-menu-config", JSON.stringify(contentMenu.scrollLeft))
    }
    const contentTable = document.getElementById('content-table');
    contentTable.scrollTop = parseInt(localStorage.getItem("scroll-table-config-trab"));
    contentTable.onscroll = (e)=>{ 
        localStorage.setItem("scroll-table-config-trab", JSON.stringify(contentTable.scrollTop))
    }

    
    function changeAddUser(id,id_form){
        document.getElementById("lbl-permanente").className = "text-center text-sm font-semibold inline-flex items-center justify-center w-full py-2 text-gray-500 bg-white border border-gray-200 rounded-full cursor-pointer hover:bg-gray-100";
        document.getElementById("lbl-servicio").className = "text-center text-sm font-semibold inline-flex items-center justify-center w-full py-2 text-gray-500 bg-white border border-gray-200 rounded-full cursor-pointer hover:bg-gray-100";
        document.getElementById(id).className = "text-center text-sm font-semibold inline-flex items-center justify-center w-full py-2 bg-white rounded-full cursor-pointer border border-blue-600 text-blue-600 hover:bg-gray-100";
        
        document.getElementById("form-add-trabajador").className = "hidden";
        document.getElementById("form-add-servicio").className = "hidden";
        document.getElementById(id_form).classList.remove("hidden");
    }

    function editUsuario(id,user,ci,telefono,rool,img) {
        document.getElementById('new-user').value = user;
        document.getElementById('new-password').value = "";
        document.getElementById('ci').value = ci;
        document.getElementById('telefono').value = telefono;

        document.getElementById("rool-div").classList.add("hidden")
        document.getElementById("btn-accept").innerText = "Actualizar"
        document.getElementById("edit_id").value = id

        document.getElementById("new-password").required = false
        


        var preview = document.getElementById('preview-image-user');
        preview.src = "/static/images/add-image2.jpg";

        document.getElementById("content-image-user").className = "inline-flex w-25 h-25 p-0.5 rounded-full bg-white border-2 border-gray-200 cursor-pointer";
    
        if(img.toString().includes("women.jpg")){
            document.getElementById("women-user").checked = true;
        }
        else if(img.toString().includes("men.jpg")){
            document.getElementById("men-user").checked = true;           
        }
        else{
            document.getElementById("women-user").checked = false;
            document.getElementById("men-user").checked = false;
            document.getElementById("preview-image-user").src = img;
            document.getElementById("content-image-user").className = "inline-flex w-25 h-25 p-0.5 rounded-full bg-white border-2 border-purple-600 cursor-pointer";
        }
        //let funcion = document.getElementById('new-function').value;
    }

    document.getElementById("form-add-trabajador").addEventListener("submit", function(event) {
        event.preventDefault();
        let user = document.getElementById('new-user').value;
        if(user == "" || user == null){
            let alert = document.getElementById("error-add");
            alert.innerHTML = `
            <svg class="w-6 h-6 mr-1" aria-hidden="true" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"></path>
            </svg>
            Proporcione un nombre de usuario`;
            alert.classList.remove("hidden");
            return false;
        }
        let password = document.getElementById('new-password').value;
        /*if(password == "" || password == null){
            let alert = document.getElementById("error-add");
            alert.innerHTML = `
            <svg class="w-6 h-6 mr-1" aria-hidden="true" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"></path>
            </svg>
            Proporcione una contraseña válida`;
            alert.classList.remove("hidden");
            return false;
        }*/
        this.submit();
    });
    
    
    function checkRoolOk(list_types){
        list_types.forEach((type) => {
            const checkboxes = document.querySelectorAll(`input[funcion-type="${type}"]`);
            checkboxes.forEach((checkbox) => {
                checkbox.checked = false;
            });
        });
    }

    function limpiarForm(){
        document.getElementById('new-user').value = "";
        document.getElementById('new-password').value = "";
        //document.getElementById('new-function').selectedIndex = 1;
        //document.getElementById("pago-content").classList.add("hidden");
        //document.getElementById("content-puntos-venta").classList.add("hidden");
        //document.getElementById("content-almacenes").classList.add("hidden");
        
        document.getElementById("men-user").checked = true;
        //document.getElementById("men-user-2").checked = true;
        document.getElementById("error-add").classList.add("hidden");
        document.getElementById("rool-div").classList.remove("hidden")
        document.getElementById("btn-accept").innerText = "Agregar"
        document.getElementById("edit_id").value = ""
        document.getElementById("new-password").required = true
    }

    function selectAvatar() {
        var preview = document.getElementById('preview-image-user');
        preview.src = "/static/images/add-image2.jpg";

        document.getElementById("content-image-user").className = "inline-flex w-25 h-25 p-0.5 rounded-full bg-white border-2 border-gray-200 cursor-pointer";

        
        var preview = document.getElementById('preview-image-user-2');
        preview.src = "/static/images/add-image2.jpg";

        document.getElementById("content-image-user-2").className = "inline-flex w-25 h-25 p-0.5 rounded-full bg-white border-2 border-gray-200 cursor-pointer";
    }

    function previewImage(event,content_id) {
        var input = event.target;
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                var preview = document.getElementById(`preview-image-${content_id}`);
                preview.src = e.target.result;
            }
            reader.readAsDataURL(input.files[0]);

            document.getElementById(`women-${content_id}`).checked = false;
            document.getElementById(`men-${content_id}`).checked = false;
            document.getElementById(`content-image-${content_id}`).className = "inline-flex w-25 h-25 p-0.5 rounded-full bg-white border-2 border-purple-600 cursor-pointer";

        }
    }

    function openSubproductos(){
        let sub = document.getElementById("subproducto-modal-btn");
        sub.click();
    }
</script>
{% endblock scripts %}