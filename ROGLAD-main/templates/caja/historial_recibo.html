{% extends 'caja/base.html' %}
{% load static custom_filters %}

{% block contentFilter %}
<form date-rangepicker class="flex h-auto bg-white w-full border-t mb-0 pt-0.5 mt-0.5" method="GET">
    <div class="relative w-1/3 border-r">
        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
        </div>
        <input name="inicio" value="{{inicio}}" type="text" class="border-0 text-gray-900 text-sm rounded-lg focus:ring-0 focus:border-0 block w-full pl-10 p-2.5" placeholder="Desde">
    </div>
    <div class="relative w-1/3">
        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
        </div>
        <input name="fin" type="text" value="{{fin}}" class="border-0 text-gray-900 text-sm rounded-lg focus:ring-0 focus:border-0 block w-full pl-10 p-2.5" placeholder="Hasta">
    </div>  
    <button class="w-1/3 flex items-center justify-center  p-2.5 text-sm font-medium leading-5 text-gray-600 hover:text-gray-800 shadow-sm hover:shadow-lg bg-gray-200 hover:bg-gray-300 border border-transparent rounded-lg focus:outline-none focus:shadow-outline-gray" type="submit">
        <svg class="w-5 h-5 mr-2" aria-hidden="true" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"></path>
        </svg>
        Filtrar historial de recibos
    </button>
</form>
{% endblock contentFilter %}

{% block contentCaja %}
<div class="pb-24 w-full flex flex-col items-center ">
{% for recibo in recibos %}
<div class="flex flex-col border border-gray-400 w-full max-w-6xl bg-white mb-3">
    <div class="flex">
        <div class="flex w-full">
            <span class="border border-b h-full w-1/3 px-2 text-md flex items-center">Entidad: Casa Laura S.R.L. </br>Codigo: 50004347244</span>
            <div class="w-1/3 border h-full font-bold flex flex-col items-center justify-center">
                <span> Recibo de Efectivo</span>
                <span>SC-3-01</span>
            </div>
            <div class="w-1/3 border flex">
                <div class="w-1/3 flex flex-col">
                    <div class="border-b h-full text-center font-bold">D</div>
                    <div class="h-full text-center" id="dia">{{recibo.turno.fin|date:"d"}}</div>
                </div>
                <div class="w-1/3 border-l flex flex-col">
                    <div class="border-b h-full text-center font-bold">M</div>
                    <div class="h-full text-center" id="mes">{{recibo.turno.fin|date:"m"}}</div>
                </div>
                <div class="w-1/3 border-l flex flex-col">
                    <div class="border-b h-full text-center font-bold">A</div>
                    <div class="h-full text-center" id="anno">{{recibo.turno.fin|date:"y"}}</div>
                </div>
            </div>
        </div>
    </div>
    <span class="flex w-full border h-full px-2 py-1">Recibido de: {{ recibo.turno.user|nullToBlank }} ({{ recibo.centro_costo_origen|nullToBlank }})</span>
    <div class="flex w-full border h-full items-center px-2">
        <span class="truncate">Cantidad en letras:</span>
        <span class="px-6 flex-grow border-0 text-sm text-gray-900 bg-transparent appearance-none focus:outline-none focus:ring-0 peer py-1">
            {{ recibo.turno.monto_letra|nullToBlank }}
        </span>
    </div>

    <div class="flex w-full border h-full">
        <span class="truncate w-4/5 border-r-2 px-2 py-1 border-l-1">Concepto</span>
        <span class="truncate w-1/5 px-2 py-1  border-r-1 text-center">Importe</span>
    </div>
    <div class="flex w-full border h-full">
        <span class="truncate w-4/5 border-r-2 px-2 py-1 border-l-1">Venta en máquina</span>
        <span class="truncate w-1/5 px-2 py-1  border-r-1 text-center">${{ recibo.turno.monto_maquina|toMoney }}</span>
    </div>
    <div class="flex w-full border h-full">
        <span class="truncate w-4/5 border-r-2 px-2 py-1 border-l-1">Venta en caja</span>
        <span class="w-1/5 text-center border-0 text-gray-900 bg-transparent appearance-none focus:outline-none focus:ring-0 peer p-0">
            ${{ recibo.turno.monto_caja|toMoney }}
        </span>
    </div>
    <div class="flex w-full border h-full">
        <span class="truncate w-4/5 border-r-2 px-2 py-1 border-l-1">Recaudación en puerta</span>
        <span class="w-1/5 text-center border-0 text-gray-900 bg-transparent appearance-none focus:outline-none focus:ring-0 peer p-0">
            ${{ recibo.turno.monto_puerta|toMoney }}
        </span>
    </div>
    <div class="flex w-full border h-full">
        <span class="truncate w-4/5 border-r-2 px-2 py-1 border-l-1">Total</span>
        <span class="truncate w-1/5 px-2 py-1 border-r-1 text-center">${{recibo.turno.monto_total|toMoney}}</span>
    </div>
    {% if recibo.motivo_diferencia %}
    <div class="flex w-full border">
        <p class="w-full text-start px-2 py-1">MOTIVO DE LA DIFERENCIA ENTRE SALDO EN CAJA Y SALDO EN MAQUINA: </br>{{recibo.motivo_diferencia}}</p>
    </div>
    {% endif %}

    <div class="flex w-full border h-full">
        <div class="w-4/5 flex">
            
            <div class="flex flex-col w-2/3 h-full justify-between">
                <div class="w-full border-b flex-grow px-2 flex items-center">Recibido: {{ recibo.turno.recibido|nullToBlank }}</div>
                <div class="w-full h-10 px-2 flex items-center">
                    Entregado
                    <span class="px-3 flex-grow border-0 text-sm text-gray-900 bg-transparent appearance-none focus:outline-none focus:ring-0 peer  py-1">
                        {{ recibo.turno.user|nullToBlank }}
                    </span>
                </div>
            </div>

            <div class="w-1/3 flex flex-col border-l-2 border-r-2 justify-start">
                <span class="truncate w-full py-1 text-center text-xs font-bold">Fecha del cobro</span>
                <div class="border-t flex justify-center">
                    <div class="w-1/3 flex flex-col">
                        <span class="border-b h-7 text-center font-bold text-sm">D</span>
                        <span class="h-10 text-center" id="dia-cobro">{{recibo.fecha_confirmacion|date:"d"}}</span>
                    </div>
                    <div class="w-1/3 border-l flex flex-col">
                        <span class="h-7 border-b text-center font-bold text-sm">M</span>
                        <span class="h-10 text-center" id="mes-cobro">{{recibo.fecha_confirmacion|date:"m"}}</span>
                    </div>
                    <div class="w-1/3 border-l flex flex-col">
                        <span class="h-7 border-b text-center font-bold text-sm">A</span>
                        <span class="h-10 text-center" id="anno-cobro">{{recibo.fecha_confirmacion|date:"y"}}</span>
                    </div>
                </div>
            </div>
        </div>

        <span class="w-1/5 p-2 border-r-1 text-center">No.</span>
    </div>            
</div>
{% endfor %}
</div>
{% endblock contentCaja %}